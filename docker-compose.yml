services:
  nuna-tools:
    # Option 1: Build locally from Dockerfile
    build:
      context: .
      dockerfile: Dockerfile
    image: nuna-tools:latest
    
    # Option 2: Use pre-built image from GitHub Container Registry
    # Uncomment the line below and comment out the 'build' section above
    # image: ghcr.io/a6-9v/nuna:main
    
    container_name: nuna-tools
    volumes:
      # Mount credentials and tokens
      - ./credentials.json:/app/credentials.json:ro
      - ./token.json:/app/token.json
      # Mount data directories for persistence
      - ./data:/data
      # Mount local config if exists
      - ./trading_data_config.json:/app/trading_data_config.json:ro
    environment:
      - PYTHONUNBUFFERED=1
      # Add OneDrive client ID if needed
      - ONEDRIVE_CLIENT_ID=${ONEDRIVE_CLIENT_ID:-}
    command: ["python", "gdrive_cleanup.py", "--help"]
    restart: unless-stopped
    networks:
      - nuna-network

networks:
  nuna-network:
    driver: bridge
